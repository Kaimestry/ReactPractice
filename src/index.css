@tailwind base;
@tailwind components;
@tailwind utilities;

/* âœ… Light mode defaults */
:root {
  /* your palette */
  --color-primary-900: #2c3139;
  --color-primary-700: #52595c;
  --color-primary-500: #9fb0b9;
  --color-primary-300: #c9dddf;
  --color-primary-100: #e0fbfc;

  /* semantic tokens (light) */
  --bg-main: var(--color-primary-100);
  --bg-muted: #cee6f1;
  --bg-hover: var(--color-primary-500);
  --bg-highlight: #49a35a;

  --text-highlight: #49a35a;
  --text-primary: var(--color-primary-900);
  --text-secondary: var(--color-primary-700);
  --text-muted: var(--color-primary-700);

  --border-default: var(--color-primary-500);
}

/* âœ… Dark mode overrides */
.dark {
  --bg-highlight: #4dbd61;
  --bg-main: var(--color-primary-900);
  --bg-hover: var(--color-primary-700);
  --bg-muted: #242a32;

  --surface-1: #2b3a40;
  --surface-2: #31434a;

  --border-default: rgba(157, 180, 192, 0.35);

  --text-highlight: #4dbd61;
  --text-primary: var(--color-primary-100);
  --text-secondary: var(--color-primary-300);
  --text-muted: var(--color-primary-700);
}

/* Hide scrollbar but allow scroll */
.hide-scrollbar {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE / Edge */
}

.hide-scrollbar::-webkit-scrollbar {
  display: none; /* Chrome / Safari */
}

@layer utilities {
  /* COLOR PALETE */
  .text-highlight {
    color: var(--text-highlight);
  }
  .text-primary {
    color: var(--text-primary);
  }
  .text-secondary {
    color: var(--text-secondary);
  }
  .text-muted {
    color: var(--text-muted);
  }

  .bg-highlight {
    background-color: var(--bg-highlight);
  }
  .bg-main {
    background-color: var(--bg-main);
  }
  .bg-muted {
    background-color: var(--bg-muted);
  }
  .bg-hover {
    background-color: var(--bg-hover);
  }
}

@layer components {
  /* =============
  vanila components
  ===============*/
  input {
    @apply w-full text-primary font-light bg-muted rounded px-2 py-1 outline-none focus:outline-none focus:ring-0;
  }

  /* =============
  NAVIGATION
  ===============*/
  .nav-sidebar {
    @apply flex flex-col justify-between h-screen gap-4 bg-muted p-2 w-56  flex-shrink-0;
    transition: width 0.2s ease;
    overflow: hidden;
  }

  /* NAV LINK */
  .nav-link {
    @apply text-sm flex items-center gap-2 px-2 py-2 rounded-md w-full;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* optional */
  }

  .nav-link:hover,
  .nav-link-active {
    background-color: var(--bg-hover);
  }

  /* 
   NAV LINK (action)
 */
  .nav-link-action {
    @apply text-sm flex items-center justify-center mt-1 gap-1 px-2 py-2 rounded-md
    bg-highlight font-semibold
    hover:opacity-80;
    color: var(--bg-main);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* optional */
  }

  /* 
   ICONS
 */
  .nav-link span,
  .nav-link-action span {
    @apply text-xl;
  }

  .action-icon {
    @apply text-2xl rounded-md;
  }

  .action-icon:hover {
    color: var(--bg-highlight);
  }

  /* 
   TITLES & TEXT
 */
  .nav-title {
    @apply text-xs text-muted ml-2;
  }

  .nav-sidebar section h1 {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis; /* optional */
  }

  .collapsed-title {
    @apply text-xs text-muted ml-2;
    display: none;
  }

  /* 
   NAV SIDEBAR (collapsed)
 */
  .nav-sidebar.collapsed {
    width: 52px;
  }

  .nav-sidebar.collapsed section {
    @apply flex justify-center pt-2;
  }

  .nav-sidebar.collapsed .action-icon {
    color: var(--bg-highlight);
  }

  .nav-sidebar.collapsed .collapsed-title {
    display: block;
  }

  /* 
   COLLAPSED VISIBILITY
 */
  .nav-sidebar.collapsed section h1,
  .nav-sidebar.collapsed .nav-link p,
  .nav-sidebar.collapsed .nav-link-action p,
  .nav-sidebar.collapsed figure,
  .nav-sidebar.collapsed .nav-title {
    display: none;
  }
  /* ===========
  REPORT ITEMS 
  ==============*/
  .report-block {
    @apply rounded-md p-4 flex flex-col;
    background-color: var(--bg-muted);
    max-height: 290px;
    flex-grow: 1;
  }

  .report-block.priority {
    flex-grow: 2; /* ðŸ†• PRIORITY */
  }

  .block-title {
    @apply text-left font-semibold flex justify-between items-center;
  }

  /* metrics */
  .report-metric {
    @apply flex flex-col justify-between;
    aspect-ratio: 3 / 1; /* width / height */
    max-height: 100px;
    min-width: 120px;
  }

  /* charts */
  .report-chart {
    @apply w-1/4 min-w-[300px] max-w-[500px]; /* ðŸ”§ CHANGED */
  }

  /* ===========
  CHATBOT
  ==============*/
  .chatbot-sidebar {
    @apply flex flex-col h-screen justify-between gap-2 bg-muted py-2 px-3 flex-shrink-0;
    transition: width 0.3s ease, transform 0.3s ease, border-radius 0.3s ease;
  }

  /* text styling */
  .chat-text {
    @apply py-1 px-4 rounded-md w-fit text-xs flex flex-col justify-between items-stretch;
    max-width: 200px;
  }

  .chat-text.chat-bot {
    @apply bg-main self-start;
  }
  .chat-text.chat-user {
    @apply bg-highlight text-gray-800 self-end;
  }

  /* COLLAPSED STYLING */
  .chatbot-sidebar.collapsed {
    @apply absolute w-[80px] h-fit bottom-0 right-0 rounded-lg;
    border: 4px solid var(--bg-main);
  }

  .chatbot-sidebar.collapsed #chatbox-header {
    @apply p-0;
    border: none;
  }

  .chatbot-sidebar.collapsed h1,
  .chatbot-sidebar.collapsed #chatbot-setting,
  .chatbot-sidebar.collapsed #chat-container,
  .chatbot-sidebar.collapsed #chatbox-user-input {
    display: none;
  }
}
